parameters:
- name: IncludeHigherPriorityTestSuites
  default: $(IncludeHigherPriorityTestSuites)
- name: TestSuite
  default: $(TestSuite)

steps:
- powershell: |
   # These should have been set by the variables in a pipeline
   
   Write-Host "TestSuite = $(TestSuite)"
   Write-Host "IncludeHigherPriorityTestSuites = $(IncludeHigherPriorityTestSuites)"
   
  displayName: 'Display Parameter Values'

- task: securedevelopmentteam.vss-secure-development-tools.build-task-postanalysis.PostAnalysis@2
  displayName: '(P0) Post Analysis: All Tools (expected to detect errors)'
  inputs:
    GdnBreakPolicyMinSev: Error
    GdnBreakGdnToolApiScanSeverity: Error
    GdnBreakGdnToolArmorySeverity: Error
    GdnBreakGdnToolBanditSeverity: Error
    GdnBreakGdnToolBinSkimSeverity: Error
    GdnBreakGdnToolCodesignValidationSeverity: Error
    GdnBreakGdnToolCredScanSeverity: Error
    GdnBreakGdnToolESLintSeverity: Error
    GdnBreakGdnToolFlawfinderSeverity: Error
    GdnBreakGdnToolFortifyScaSeverity: Error
    GdnBreakGdnToolFxCopSeverity: Error
    GdnBreakGdnToolModernCopSeverity: Error
    GdnBreakGdnToolPoliCheckSeverity: Error
    GdnBreakGdnToolRoslynAnalyzersSeverity: Error
    GdnBreakGdnToolSDLNativeRulesSeverity: Error
    GdnBreakGdnToolSemmleSeverity: Error
    GdnBreakGdnToolSpotBugsSeverity: Error
    GdnBreakGdnToolTSLintSeverity: Error
  continueOnError: true
  condition: and(succeeded(), or(eq(variables['TestSuite'], 'P0'), eq(variables['IncludeHigherPriorityTestSuites'], 'true')))

#
# More permutations / variations to be added here
#
